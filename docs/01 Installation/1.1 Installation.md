# Installation d’Alpine Linux

## **Démarrage et accès au shell root**
Quand on démarre Alpine depuis l’ISO, on arrive directement sur une invite de connexion. 

Tapez simplement`root`,  aucun mot de passe ne vous sera demandé. L'installeur rend temporairement root accessible.

![[1.1 Installation.png]]

## **Lancer l’assistant d’installation**
```sh
setup-alpine
```
Ce script configure automatiquement les éléments essentiels.
Paramètres recommandés :

| Paramètre                 | Valeur                       | Pourquoi ce choix ?                                                                                         |
| ------------------------- | ---------------------------- | ----------------------------------------------------------------------------------------------------------- |
| **Keymap**                | `fr`                         | Clavier français.                                                                                           |
| **Keyboard layout**       | `fr-nodeadkeys`              | Version française du clavier AZERTY.                                                                        |
| **Hostname**              | `alpine-TP`                  | Nom de votre machine                                                                                        |
| **Interface réseau**      | `eth0 : dhcp` `eth1 : dhcp`  | Les IP seront configurées plus tard une fois le système en place.                                           |
| **Root password**         | `root`                       | Mot de passe root pour ce TP sera suffisant.  Il sera changé puis désactivé par la suite .                  |
| **Timezone**              | `Europe/Paris`               | Assure des horodatages cohérents pour les logs et l’heure du système.                                       |
| **Proxy**                 | `none`                       | Aucun proxy nécessaire pour ce TP.                                                                          |
| **Network Time Protocol** | `chrony`                     | Service qui sert à synchroniser l’horloge système                                                           |
| **APK mirror**            | `f` (trouver le plus rapide) | Sélection automatique du miroir le plus rapide → installation et mises à jour plus rapides.                 |
| **User**                  | `user`                       | Crée un utilisateur classique                                                                               |
| **SSH server**            | `openssh`                    | Permet la connexion distante et facilite le travail depuis le poste hôte (copier/coller, multitâche, etc.). |
| **Disk & Install**        | `sda`, `sys`, `y`            | Sléectionner le  dique`sda` puis le mode _sys_  (persistance des données).                                  |
> [!warning] **A FAIRE IMPERATIVEMENT **
> **Retirez l’ISO Alpine du lecteur CD dans la VM**
> 
> Dans VirtualBox :
> 1. VM éteinte  
> 2. Configuration → Stockage  
> 3. Dans « Contrôleur IDE » ou « SATA » :  
>     - sélectionnez le lecteur CD  
>     - cliquez sur la petite icône du CD (à gauche)  
>     - choisissez **Retirer le disque virtuel**

> [!NOTE] Note
> Si vous sautez cette étape (ou si vous ne la validez pas), votre VM bootera très probablement en mode “**Live CD**” appelé aussi “diskless mode” (sans disque dur). 
> 
> Cela signifie que :
> - Aucune donnée ne sera sauvegardé
> -  Aucun disque n’est utilisé
> - Toutes vos modifications seront stockées en RAM
> 
> Si vous commencez vos manipulations sur une installation sans avoir fixé ces réglages, dites adieu à votre travail … et le pire c’est que maintenant vous savez pourquoi.

Une fois cette procédure terminée , redémarrez la VM.

## Vérification après redémarrage 
### Système de fichier (ext4)
```
mount | grep " / "
```
Résultat attendu: 
```
/dev/sda3 on / type ext4 (rw,relatime)
```

### Réseau
```
ip a
```
Résultat attendu: 
```
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 08:00:27:97:6d:3d brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.6/24 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe97:6d3d/64 scope link 
       valid_lft forever preferred_lft forever
3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 08:00:27:a5:93:47 brd ff:ff:ff:ff:ff:ff
    inet 192.168.56.10/24 scope global eth1
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fea5:9347/64 scope link 
       valid_lft forever preferred_lft forever
```
### Dépôt apk
```
cat /etc/apk/repositories 
```
Résultat attendu:
```
#/media/cdrom/apks
http://dl-cdn.alpinelinux.org/alpine/v3.22/main
http://dl-cdn.alpinelinux.org/alpine/v3.22/community
```