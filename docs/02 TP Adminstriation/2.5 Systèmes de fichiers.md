# 2.4 SystÃ¨mes de fichiers sous Alpine

## Objectif du TP

On va essayer de conprenre ce quâ€™est un **systÃ¨me de fichiers**, pourquoi `/` est appelÃ© la **racine**, et en quoi le **montage** conditionne lâ€™accÃ¨s aux donnÃ©es et Ã  lâ€™Ã©tat du systÃ¨me.

## 1. Rappel : arborescence et navigation

Un systÃ¨me Unix/Linux prÃ©sente **une seule arborescence**, accessible Ã  partir de `/`. Contrairement Ã  Windows, il nâ€™existe pas de notion de lecteur (c: ou d:).  

Observer :
```sh
pwd
ls /
```

> [!NOTE]  Arborescence
> 1) Une arborescence est une organisation hiÃ©rarchique de fichiers et de rÃ©pertoires, structurÃ©e Ã  partir dâ€™un point d'entrÃ© unique: la **racine**  notÃ©e `/`.  
> 2) Un fichier ou un rÃ©pertoire occupe une position unique dans cette arborescence, et peut Ãªtre  localisÃ© par son **chemin dâ€™accÃ¨s** en partant de la racine. Par exemple: /dossier-A/dossier-2/fichier3.txt 

> [!NOTE] **RÃ©pertoire de travail** 
> Sur un systÃ¨me Unix, chaque **processus** possÃ¨de un **rÃ©pertoire de travail**, qui fait partie de son **environnement dâ€™exÃ©cution**.  
> Dans le cadre de ce TP, le processus concernÃ© est le **shell**.  
> Lors de lâ€™ouverture de session, le shell est lancÃ© depuis le **rÃ©pertoire personnel** de lâ€™utilisateur, dÃ©fini dans `/etc/passwd`.  
> Ce rÃ©pertoire devient le **rÃ©pertoire de travail initial** du shell et sert de rÃ©fÃ©rence pour la rÃ©solution des chemins relatifs.

## 2. `/` nâ€™est pas un  rÃ©pertoire

Observer lâ€™occupation disque :
```sh
df -h
```

Constat :  
La commande ne mesure pas un rÃ©pertoire mais un **systÃ¨me de fichiers**.  
La racine `/` correspond Ã  un espace mesurable (taille, utilisÃ©, disponible).

ğŸ‘‰ La notion de **systÃ¨me de fichiers (filesystem, FS)** devient nÃ©cessaire :  
un FS est une structure permettant de stocker, organiser et accÃ©der aux fichiers.

---

## 3. La racine `/` est un point de montage

Observer les systÃ¨mes montÃ©s :

```sh
mount
```

Constat :  
Le systÃ¨me de fichiers principal est **montÃ© sur `/`**.  
La racine nâ€™est pas abstraite : câ€™est le **point de montage** du premier FS accessible au dÃ©marrage.

---

## 4. Un systÃ¨me de fichiers nâ€™est accessible **que sâ€™il est montÃ©**

Comparer :

```sh
mount
df -h
```

Constat :  
Seuls les systÃ¨mes de fichiers montÃ©s apparaissent et sont utilisables.  
Un FS peut exister, mais tant quâ€™il nâ€™est pas montÃ©, il est **inaccessible**.

ğŸ‘‰ Le montage est le mÃ©canisme qui rend un systÃ¨me de fichiers utilisable par le systÃ¨me.

---

## 5. Effet du montage sur lâ€™arborescence

CrÃ©er un rÃ©pertoire et un fichier :

```sh
mkdir /mnt/test
touch /mnt/test/fichier
ls /mnt/test
```

Monter un systÃ¨me de fichiers temporaire :

```sh
mount -t tmpfs tmpfs /mnt/test
ls /mnt/test
```

DÃ©monter :

```sh
umount /mnt/test
ls /mnt/test
```

Constat :  
Le montage **masque** le contenu existant sans le supprimer.  
Le dÃ©montage restaure la vue initiale.

---

## 6. Tous les Ã©lÃ©ments visibles ne proviennent pas dâ€™un disque

Observer :

```sh
mount
ls /proc
ls /sys
```

Constat :  
`/proc` et `/sys` sont des **systÃ¨mes de fichiers montÃ©s**, mais ne correspondent pas Ã  un disque.  
Ils exposent lâ€™Ã©tat interne du noyau et du matÃ©riel.

ğŸ‘‰ Le montage ne sert pas uniquement aux disques :  
il permet au noyau de rendre accessibles des informations internes via lâ€™arborescence.

---

## 7. Organisation normalisÃ©e de lâ€™arborescence

Observer la prÃ©sence de rÃ©pertoires standards :

```sh
ls /
```

Constat :  
Les emplacements (`/etc`, `/home`, `/proc`, `/sys`, `/var`) ne sont pas arbitraires.  
Ils suivent une **norme Unix/Linux** (FHS), ce qui permet de sâ€™orienter sur dâ€™autres distributions ou systÃ¨mes Unix.

---

## Conclusion

La racine `/` est le point de dÃ©part de lâ€™arborescence parce quâ€™elle est le **point de montage** du premier systÃ¨me de fichiers.  
Un systÃ¨me de fichiers nâ€™est accessible **que sâ€™il est montÃ©**, quâ€™il sâ€™agisse de donnÃ©es stockÃ©es ou dâ€™informations fournies par le noyau.  
Comprendre le montage est indispensable pour comprendre lâ€™organisation, lâ€™accÃ¨s et le fonctionnement dâ€™un systÃ¨me Linux.
