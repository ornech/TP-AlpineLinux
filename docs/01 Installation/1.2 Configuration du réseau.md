# 1.2 Configuration du réseau
Maintenant que l'installation de Alpine est réalisée, nous allons configurer nos **deux interfaces réseau** :
- **eth0 → NAT** (accès Internet)
- **eth1 → Réseau d’hôtes** (communication VMs ↔ machine hôte)

## Lancer l'utilitaire de configuration réseau
```
setup-interfaces
```
L’outil devrais détecter vos interfaces disponibles :
- `eth0` (Réseau NAT VirtualBox)
- `eth1` (Réseau d’hôtes VirtualBox)

> [!warning] *Si une seule interface réseau est détectée*
> Retournez sur la configuration VirtualBox de votre VM pour activer la seconde carte réseau ('Cable branché") ... 

## Configurer eth0 (NAT)
`setup-interfaces` détecte automatiquement la première interface réseau [eth0]
```
Which one do you want to initialize? (or '?' or 'done') [eth0]
```
Appuyer **Entrée** pour accepter **eth0** 

Ensuite il vous demande de valider le choix configuration via **DHCP**.
```
Ip address for eth0? (or 'dhcp','none','?') [dhcp]
```
Appuyer **Entrée** pour accepter

Résultat :  
L’interface recevra une IP du NAT VirtualBox, typiquement :
```
10.0.2.x
```

## Configurer eth1 (Réseau d’hôtes)

Répétez l'opération
```
Which one do you want to initialize? (or '?' or 'done') [eth1]
Ip address for eth1? (or 'dhcp','none','?') [dhcp]
```
Appuyer **Entrée** pour valider  comme précédemment.

Cette interface recevra une IP fournie par le DHCP du **réseau d’hôtes** VirtualBox :
```
192.168.56.x
```
##  Configuration manuelle

Dernière question, voulez-vous configurer manuellement une autre carte:
```
Do you want to do any manual network configuration? (y/n) [n]
```
Répondre **n**  

Alpine créer les fichiers sous `/etc/network/interfaces`.

## Redémarrer le service réseau

Pour appliquer la configuration redémarrez le service `networking`
``` bash
rc-service networking restart
```

Vous devez voir :
``` bash
Starting networking ...
 * lo     [ ok ]
 * eth0   [ ok ]
 * eth1   [ ok ]

 * eth0 ...
udhcpc: started, v1.37.0
udhcpc: broadcasting discover
udhcpc: broadcasting select for 10.0.2.8, server 10.0.2.3
udhcpc: lease of 10.0.2.8 obtained from 10.0.2.3, lease time 600
 * eth1 ...
udhcpc: started, v1.37.0
udhcpc: broadcasting discover
udhcpc: broadcasting select for 192.168.56.12, server 192.168.56.2
udhcpc: lease of 192.168.56.12 obtained from 192.168.56.2, lease time 
```

## Vérification des adresses IP
``` bash
ip addr
```

``` bash
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noop state UNKNOWN qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever

2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 08:00:27:d7:2d:a0 brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.8/24 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fed7:2da0/64 scope link
       valid_lft forever preferred_lft forever

3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 08:00:27:f4:9c:5f brd ff:ff:ff:ff:ff:ff
    inet 192.168.56.12/24 scope global eth1
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fef4:9c5f/64 scope link
       valid_lft forever preferred_lft forever
```
Résultat attendu :
```
eth0: inet 10.0.2.x/24        ← NAT (Internet)
eth1: inet 192.168.56.x/24    ← Réseau d’hôtes (TP SISR)
```
   

Pour plus d'information rendez-vous dans la section 'guide d'administration"
[[2.3 Configuration du réseau]]

