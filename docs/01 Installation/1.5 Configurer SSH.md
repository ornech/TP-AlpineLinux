# 1.5 Configurer SSH

> [!NOTE] Objectifs
> ✔ installer SSH  
> ✔ activer SSH au démarrage  
> ✔ autoriser la connexion SSH utilisateur par mot de passe
## Installation
Alpine Linux est livré avec le strict minimum en terme d'outils et de commande. En plus de sshd nous allons installer les outils GNU  pour nous facilité un peu la vie.
``` bash
apk add openssh
```
## Activer le service SSH
**n’active aucun service automatiquement**
``` bash
rc-service sshd start
rc-update add sshd
```
## Autoriser les connexions SSH avec mot de passe
Pour permettre la connexion distante de l’utilisateur _etudiant_, nous devons autorisé l’authentification par mot de passe dans le fichier de configuration `/etc/ssh/sshd_config`

Éditez :
``` bash
nano /etc/ssh/sshd_config
```

Activez le paramètre `PasswordAuthentication` soit activé . La ligne ne doit pas commentée (supprimez le # en début de ligne) :
``` bash
PasswordAuthentication yes
```

Redémarrez le service SSH :
``` bash
rc-service sshd restart
```

Vérifiez que le service soit à l'écoute sur le port 22.
``` bash
netstat -tlnp | grep ssh
```

Vous devriez voir quelque chose comme  ça
``` bash
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
tcp6       0      0 :::22                   :::*                    LISTEN
```
> [!NOTE]
> Notez que c'est le seul port 22 est ouvert à l'écoute de l'adresse 0.0.0.0 (c'est à dire que n'importe quelle adresse IP peut connecter ce port). 
> La philosophie Alpine Linux veut que rien ne soit autorisé sans qu'un administrateur ne l'ai explicitement autorisé.

## Tester la connexion
Depuis votre machine hôte :
```
`ssh etudiant@<IP_ALPINE>`
```

